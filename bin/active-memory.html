<meta charset="utf-8">
<script src="http://yui.yahooapis.com/3.6.0/build/yui/yui-min.js"></script>    
<script src="http://code.jquery.com/jquery-latest.js"></script>
<style>

#ntl-menu li.liTop:hover ul {margin-top:24px;}

#ntl-menu :hover ul {left:0;}
#ntl-menu :hover ul a {
	whitespace:nowrap;
  /* Color of child menu items when hovering over parent main menu item */
	color: #a44505;
	border: 0px;
}
#ntl-menu :hover ul b {position:absolute;}
#ntl-menu :hover ul.right {left:auto; right:-1px;}

#ntl-menu :hover ul :hover ul {left:95%; margin-top:-26px;}

#ntl-menu :hover ul :hover ul.left {left:auto; right:95%; margin-top:-26px;}

#ntl-menu :hover ul ul, #ntl-menu :hover ul :hover ul ul {left:-9999px;}

#ntl-menu :hover ul ul.left {left:-9999px; right:auto;}

#ntl-menu table {border-collapse:collapse; margin-top:-1px;}

#main-container {
}

#main-container h1:first, nav h2 {
	padding-top: 0px;
}
#consoleLog  {
  font-size:8px;
height: 5000px;
	
}

#webSocketSupp {
	display: none;
	width:200px;
	border: 2px solid #060;
	background-color: #F0FFF0;
	margin: 20px;
	margin-top: 5px;
	padding: 10px;
	font-size: 16px;
	color: #0d8900;
}

#webSocketSupp p {
	font-size: 16px;
	color: #0d8900;
}

#noWebSocketSupp {
	display: none;
	border: 2px solid #cb0000;
	background-color: #FFE1E1;
	margin: 20px;
	margin-top: 5px;
	padding: 10px;
	font-size: 16px;
	color: #800000;
}

#noWebSocketSupp p {
	font-size: 16px;
	line-height: 125%;
	color: #800000;
	margin-top: 10px;
}
#noWebSocketSupp p:first-child {
	margin-top: 0px;
}

#echo {
	
}

#echo button {
	margin-top: 5px;
}

#top-compat-box {
	float: right;
	width: 150px;
  -webkit-border-radius: 10px;
  -moz-border-radius: 10px;
  border-radius: 10px;
	background-color: #b84d06;
	color: #EEEEEE;
	padding-top: 2px;
	padding-bottom: 2px;
	padding-left: 10px;
	padding-right: 10px;
	height: 65px;
}

#top-compat-box p {
	font-weight: bold;
	font-size: 11px;
}

#top-compat-box #top-compat-info-box {
  -webkit-border-radius: 8px;
  -moz-border-radius: 8px;
  border-radius: 8px;
	background-color: #EEEEEE;
	color: #3b6f8f;
	padding-top: 2px;
	padding-bottom: 2px;
	padding-left: 5px;
	padding-right: 5px;
	margin-top: 5px;
	font-size: 11px;
	font-weight: bold;
	text-align: center;
}

#top-compat-box #top-compat-info-box #top-compat-info {
	float: left;
}
#top-compat-box #top-compat-info-box #top-compat-image {
	float: left;
	margin-left: 10px;
}

#html5-logo-outer {
	position: relative; width: 960px;
}

#html5-logo-inner {
	position: absolute; right: 0px;
}

.instructions {
	width: 100%;
  border-top: dotted 1px #DDDDDD;
}

.instructions td {
  font-size: 12px; font-family: arial, helvetica, verdana, sans-serif; color: #666666;
  border-bottom: dotted 1px #DDDDDD;
	padding-top: 3px;
	padding-bottom: 3px;
	background-color: #FCFCFC;
}

.codePanel {
	border: dashed 1px #a44505;
	background-color: #F9F9F9;
	padding: 10px;
	color: #333333;
	margin-top: 15px;
	width: 90%;
}

.codePanel pre {
	font-size: 12px;
}

#subcopy pre {font-size: 12px; line-height: 16px; border: 1px dashed #a44505; width: 666px; padding: 20px; margin: 0 0 12px 18px; color: #888888;}
#subcopy pre b {color: #2e3192; font-weight: normal;}
#subcopy pre u {color: #92278f; text-decoration: none;}
#subcopy pre strike {color: #197b30; text-decoration: none;}

footer {
  border-top: solid 1px #ffe4d2;
  background-repeat:repeat-x;
	margin-top: 20px;
	padding-top: 5px;
	padding-bottom: 5px;
	padding-left: 10px;
	padding-right: 10px;
	font-size: 10px;
	color: #999999
}

.demo-summary {
	border-top: solid 1px #ffe4d2;
	padding-top: 20px;
	padding-bottom: 20px;
	width: 760px;
}

.demo-summary:last-child {
	border-bottom: solid 1px #ffe4d2;
}

.demo-summary .thumbnails {
	width: 225px;
	float: left;
}

.demo-summary .thumbnails .thumbnail {
	border: solid 1px #AAAAAA;
}

.demo-summary .details {
	width: 535px;
	float: left;
}

.demo-summary .details .title {
	font-weight: bold;
	font-size: 150%;
}

.demo-summary .details .desc {
}

</style>

  <div class="clearfix"></div>

  <div id="results"></div>

  <div id="container">

    <div class="clearfix"></div>
    <br>

    <script language="javascript" type="text/javascript">
    
      function browserDetect()
      {
        document.getElementById("browserType").innerHTML = BrowserDetect.browser + ' ' + BrowserDetect.version;
        document.getElementById("platform").innerHTML = BrowserDetect.OS;
    
        if (window.WebSocket)
        {
        }
        else
        {
        }
      }
    
		  // Handle difference for IE.
      if (window.attachEvent)
			{
        window.attachEvent("load", browserDetect)    
			}
			else
			{
        window.addEventListener("load", browserDetect, false);
			}
		
    </script>

    <nav>
      
    
    </nav>
    
    <div id="main-container">


      <div id="main">
        
        
        <div id="webSocketSupp"></div>
        <div style="display:none;" id="noWebSocketSupp">
          <div style="float: left;">
          img-
	  </div>
          <div style="float: left; width: 60px; margin-left: 1px;">
            <p>Uh-oh, the browser you're using doesn't have native support for WebSocket. That means you can't run this demo.</p>
            <p>The following link lists the browsers that support WebSocket:</p>

          </div>
        </div>
        <div id="echo">
          <div id="echo-config" style="float: left;">
            <strong>Location:</strong><br>
            <input id="wsUri" size="35" value="ws://0.0.0.0:3000" disabled="">
            <br>
            <input type="checkbox" id="secureCb" onclick="toggleTls();" disabled="">
            <span id="secureCbLabel" style="font-size: smaller; color: rgb(153, 153, 153); ">Use secure WebSocket (TLS)</span><br>
            <button id="connect" disabled="">Connect</button>
            <button id="disconnect">Disconnect</button>
            <br>
            <br>
            <strong>Message:</strong><br>
            <input id="sendMessage" size="35" value="Rock it with HTML5 WebSocket" class="yui3-aclist-input" aria-autocomplete="list" aria-expanded="false" aria-owns="yui_3_6_0_2_1347698521800_36" autocomplete="off">
            <br>
            <button id="send" class="wsButton">Send</button>
       

<code id="echo-log" style="float: left; margin-left: 20px; padding-left: 20px;width:58%; min-width: 900px; border-left: solid 1px #cccccc;">

<strong>Log:</strong>

<button id="clearLogBut" style="position: relative; top: 3px;">Clear log</button>
<div id="consoleLog"></div>

</code>

          </div>
          <div class="clearfix"></div>

        <script type="text/javascript">
  var secureCb;
  var secureCbLabel;
  var wsUri;
  var consoleLog;
  var connectBut;
  var disconnectBut;
  var sendMessage;
  var sendBut;
  var clearLogBut;

  function echoHandlePageLoad()
  {
    if (window.WebSocket)
    {
      document.getElementById("webSocketSupp").style.display = "block";
    }
    else
    {
      document.getElementById("noWebSocketSupp").style.display = "block";
    }

    secureCb = document.getElementById("secureCb");
    secureCb.checked = false;
    secureCb.onclick = toggleTls;
    
    secureCbLabel = document.getElementById("secureCbLabel")
    
    wsUri = document.getElementById("wsUri");
    toggleTls();
    
    connectBut = document.getElementById("connect");
    connectBut.onclick = doConnect;
    
    disconnectBut = document.getElementById("disconnect");
    disconnectBut.onclick = doDisconnect;
    
    sendMessage = document.getElementById("sendMessage");

    sendBut = document.getElementById("send");
    sendBut.onclick = doSend;

    consoleLog = document.getElementById("consoleLog");

    clearLogBut = document.getElementById("clearLogBut");
    clearLogBut.onclick = clearLog;

    setGuiConnected(false);

    document.getElementById("disconnect").onclick = doDisconnect;
    document.getElementById("send").onclick = doSend;

  }

  function toggleTls()
  {
    var wsPort = (window.location.port.toString() === "" ? "" : ":"+window.location.port)
    if (wsUri.value === "") {
        wsUri.value = "ws://" + window.location.hostname.replace("www", "echo") + wsPort;
    }
    
    if (secureCb.checked)
    {
      wsUri.value = wsUri.value.replace("ws:", "wss:");
    }
    else
    {
      wsUri.value = wsUri.value.replace ("wss:", "ws:");
    }
  }
  
  function doConnect()
  {
    if (window.MozWebSocket)
    {
        logToConsole('<span style="color: red;"><strong>Info:</strong> This browser supports WebSocket using the MozWebSocket constructor</span>');
        window.WebSocket = window.MozWebSocket;
    }
    else if (!window.WebSocket)
    {
        logToConsole('<span style="color: red;"><strong>Error:</strong> This browser does not have support for WebSocket</span>');
        return;
    }

    // prefer text messages
    var uri = wsUri.value;
    if (uri.indexOf("?") == -1) {
        uri += "?encoding=text";
    } else {
        uri += "&encoding=text";
    }
    websocket = new WebSocket(uri);
    websocket.onopen = function(evt) { onOpen(evt) };
    websocket.onclose = function(evt) { onClose(evt) };
    websocket.onmessage = function(evt) { onMessage(evt) };
    websocket.onerror = function(evt) { onError(evt) };
  }
  
  function doDisconnect()
  {
    websocket.close()
  }
  
  function doSend()
  {
    logToConsole("SENT: " + sendMessage.value);
    websocket.send(sendMessage.value);
  }

  function logToConsole(message)
  {
    var pre = document.createElement("p");
    pre.style.wordWrap = "break-word";
    pre.innerHTML = getSecureTag()+message;
    consoleLog.appendChild(pre);

    while (consoleLog.childNodes.length > 50)
    {
      consoleLog.removeChild(consoleLog.firstChild);
    }
    
    consoleLog.scrollTop = consoleLog.scrollHeight;
  }
  
  function onOpen(evt)
  {
    logToConsole("CONNECTED");
    setGuiConnected(true);
  }
  
  function onClose(evt)
  {
    logToConsole("DISCONNECTED");
    setGuiConnected(false);
  }
  
  function onMessage(evt)
  {
    logToConsole('<span style="color: blue;">RESPONSE: ' + evt.data+'</span>');
  }

  function onError(evt)
  {
    logToConsole('<span style="color: red;">ERROR:</span> ' + evt.data);
  }
  
  function setGuiConnected(isConnected)
  {
    wsUri.disabled = isConnected;
    connectBut.disabled = isConnected;
    disconnectBut.disabled = !isConnected;
    sendMessage.disabled = !isConnected;
    sendBut.disabled = !isConnected;
    secureCb.disabled = isConnected;
    var labelColor = "black";
    if (isConnected)
    {
      labelColor = "#999999";
    }
     secureCbLabel.style.color = labelColor;
    
  }
	
	function clearLog()
	{
		while (consoleLog.childNodes.length > 0)
		{
			consoleLog.removeChild(consoleLog.lastChild);
		}
	}
	
	function getSecureTag()
	{
		if (secureCb.checked)
		{
			return 'lock';
		}
		else
		{
			return '';
		}
	}
  
  window.addEventListener("load", echoHandlePageLoad, false);

	</script>

  <script>


    $('#webSocketSupp').fadeIn(1500);
    setTimeout(function(){$('#webSocketSupp').fadeOut(1500,function(){
    document.getElementById("connect").click();

    $('#webSocketSupp').remove();
    $('#connect').click(1);
    })},3000);


  </script>

</div>        
      </div>        





</div></div></body></html>
